# 3.3.设置字符串的格式: 完整版

- 本节讨论字符串的`format()`方法. 格式字符串使用类似的规则
- 替换字段 (转换说明符)
    - 字符串中用花括号括起来的部分
    - 用于指定插入值的位置, 所插入的值, 插入格式
    - 每个替换字段都被其所指定的值的表示所替换
- 使用连续两个花括号来包含花括号字面字符: `{{`, `}}`
- 替换字段`{VALUE|INDEX!TRANSLATE_INDICATOR:FORMATTER}`由以下三个可选的部分组成
    - 字段名
        - 索引或标识符
        - 用于指示所使用的值或值的特定部分
    - 转换标志
        - 跟在叹号后的单个字符: `!TRANSLATE_INDICATOR`
        - 当指定了转换标志时, 将不使用对象本身的`__str__()`方法, 而是使用指定的函数将对象转换为字符串, 再进一步设置格式
        - `!r`: `repr()`: 创建给定值的Python表示
        - `!s`: `str()`: 创建给定值的人类易读的表示
        - `!a`: `ascii()`: 创建给定值的仅包含ASCII字符的Python表示
    - 格式说明符
        - 跟在冒号后的表达式
        - 用于详细指定格式
            - 格式类型 (如字符串, 浮点数, 十六进制数)
            - 字段宽度
            - 数的精度
            - 符号与千位分隔符
            - 对齐与填充方式
        - 使用微型格式指定语言 Mini-language

## 1. 字段名

- 未命名字段名: 依序使用未命名参数: `{}`
- 命名字段名: 使用对应命名参数: `{name}`
- 索引字段名: 使用未命名参数列表中指定索引处的参数: `{0}`
- 可以将字段名作为变量名来访问其组成部分: `{name[0]}`
- 模块的`__name__`变量包含其名称

## 2. 类型说明符

- 类型说明符: 指示将值视为哪种类型
- `s`: 原字符串
    - 字符串的默认类型说明符
- `c`: Unicode码点对应的字符
- `b`: 二进制整数
- `o`: 八进制整数
- `d`: 十进制整数
    - 整数的默认类型说明符
- `x`: 小写字母十六进制整数
- `X`: 大写字母十六进制整数
- `f`: 定点小数, 特殊值`nan`, `inf`
- `F`: 定点小数, 特殊值`NAN`, `INF`
    - 默认精度为6
- `e`: 科学表示法小数, 用e表示指数
- `E`: 科学表示法小数, 用E表示指数
    - 默认精度为6
- `g`: 自动选择定点小数`f`或科学表示法小数`e`
    - 默认精度为6
    - 浮点数的默认类型说明符
        - 当作为默认类型说明符而非显式指定时, 定点小数形式下至少有1位小数
- `G`: 自动选择定点小数`F`或科学表示法小数`E`
- `n`: 自动选择定点小数`f`或科学表示法小数`e`, 并插入随区域而异的数字分隔符
- `%`: 百分比数: 乘以100, 按定点小数`f`设置, 再在末尾加上`%`

## 3. 宽度, 精度和千位分隔符

- 浮点数默认显示6位有效数字, 不限定宽度, 不进行填充
- 使用整数指定宽度: `INTEGER`
    - 不足宽度默认用空格填充
- 千位分隔符
    - `,`: 逗号千位分隔符
    - `_`: 下划线千位分隔符
- 使用句点与整数指定精度: `.INTEGER`
    - 当对字符串指定精度时, 仅显示前`INTEGER`个字符
- 格式设置元素顺序: 宽度, 千位分隔符, 精度, 类型说明符: `[WIDTH][GROUPING][.PRECISION][TYPE]

## 4. 符号, 对齐和用0填充

- `0`: 使用前缀0填充数字
- 符号说明符:
    - `+`: 正数前加正号`+`, 负数前加负号`-`
    - `-`, 默认: 正数前不加符号, 负数前加负号`-`
    - `\ ` (空格): 正数前加空格`\ `, 负数前加负号`-`
- 对齐说明符:
    - `<`: 左对齐
    - `^`: 居中对齐
    - `>`: 右对齐
    - `=`: 符号左对齐, 数字右对齐, 即指定填充字符放在符号与数字之间
        - 当指定使用前缀0填充数字时, `=`默认启用
    - 注意: 字符串默认左对齐, 数字默认右对齐, 同一栏输出时可能需要设定对齐方式
- 填充说明符: 在对齐说明符前指定填充字符
    - 默认填充字符: 空格
- `#`: 触发另一种转换方式, 转换细节随类型而异
    - `b`, `o`, `x`, `X`: 加上前缀
    - `d`, `f`, `F`, `%`: 必须包含小数点
    - `g`, `G`, `n`: 保留小数点后面的零
- 格式设置元素顺序: 填充说明符, 对其说明符, 符号说明符, `#`, `0`, 宽度, 千位分隔符, 精度, 类型说明符: `[[FILL]ALIGN][SIGN][#][0][WIDTH][GROUPING][.PRECISION][TYPE]`
